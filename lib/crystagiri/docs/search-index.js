crystal_doc_search_index_callback({"repository_name":"github.com/madeindjs/Crystagiri","body":"# Crystagiri\n\nAn HTML parser library for Crystal like the amazing [Nokogiri](https://github.com/sparklemotion/nokogiri) Ruby gem.\n\n> I won't pretend that **Crystagiri** does much as **Nokogiri**. All help is welcome! :)\n\n## Installation\n\nAdd this to your application's `shard.yml`:\n\n```yaml\ndependencies:\n  crystagiri:\n    github: madeindjs/crystagiri\n```\n\nand then run \n\n```bash\n$ crystal deps\n```\n\n## Usage\n\n```crystal\nrequire \"crystagiri\"\n```\n\nThen you can simply instantiate  a `Crystagiri::HTML` object from an HTML `String` like this\n\n```crystal\ndoc = Crystagiri::HTML.new \"<h1>Crystagiri is awesome!!</h1>\"\n```\n\n... or directly load it from a Web URL or a pathname:\n\n```crystal\ndoc = Crystagiri::HTML.from_file \"README.md\"\ndoc = Crystagiri::HTML.from_url \"http://example.com/\"\n```\n\nThen you can search all [`XML::Node`](https://crystal-lang.org/api/0.20.1/XML/Node.html)s from the `Crystagiri::HTML` instance. The tags found will be `Crystagiri::Tag` objects with the `.node` property:\n\n* CSS query\n\n```Crystal\nputs doc.css(\"li > strong.title\") { |tag| puts tag.node}\n# => <strong class=\"title\"> .. </strong>\n# => <strong class=\"title\"> .. </strong>\n```\n\n> **Known limitations**: Currently, you can't use CSS queries with complex search specifiers like `:nth-child`\n\n* HTML tag\n\n```Crystal\ndoc.where_tag(\"h2\") { |tag| puts tag.content }\n# => Development\n# => Contributing\n```\n\n* HTML id\n\n```Crystal\nputs doc.at_id(\"main-content\").tagname\n# => div\n```\n\n* HTML class attribute\n\n```Crystal\ndoc.where_class(\"summary\") { |tag| puts tag.node }\n# => <div class=\"summary\"> .. </div>\n# => <div class=\"summary\"> .. </div>\n# => <div class=\"summary\"> .. </div>\n```\n\n## Benchmark\n\nI know you love benchmarks between **Ruby** & **Crystal**, so here's one:\n\n```ruby\nrequire \"nokogiri\"\nt1 = Time.now\ndoc = Nokogiri::HTML File.read(\"spec/fixture/HTML.html\")\n1..100000.times do\n  doc.at_css(\"h1\")\n  doc.css(\".step-title\"){ |tag| tag }\nend\nputs \"executed in #{Time.now - t1} milliseconds\"\n```\n\n> executed in 00:00:12.08 seconds with Ruby 2.5.1 with RVM\n\n```crystal\nrequire \"crystagiri\"\nt = Time.now\ndoc = Crystagiri::HTML.from_file \"./spec/fixture/HTML.html\"\n1..100000.times do\n  doc.at_css(\"h1\")\n  doc.css(\".step-title\") { |tag| tag }\nend\nputs \"executed in #{Time.now - t} milliseconds\"\n```\n\n> executed in 00:00:03.89 seconds on Crystal 0.27.0 on LLVM 4.0.0 with release flag\n\nCrystagiri is **three time faster** than Nokogiri!!\n\n\n## Development\n\nClone this repository and navigate to it:\n\n```bash\n$ git clone https://github.com/madeindjs/crystagiri.git\n$ cd crystagiri\n```\n\nYou can generate all documentation with \n\n```bash\n$ crystal doc\n```\n\nAnd run **spec** tests to ensure everything works correctly \n\n```bash\n$ crystal spec\n```\n\n\n## Contributing\n\n1. Fork it ( https://github.com/madeindjs/crystagiri/fork )\n2. Create your feature branch `git checkout -b my-new-feature`\n3. Commit your changes `git commit -am \"Add some feature\"`\n4. Push to the branch `git push origin my-new-feature`\n5. Create a new Pull Request\n\n## Contributors\n\n- [madeindjs](https://github.com/madeindjs) - creator, maintainer\n","program":{"html_id":"github.com/madeindjs/Crystagiri/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"github.com/madeindjs/Crystagiri","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/madeindjs/Crystagiri/Crystagiri","path":"Crystagiri.html","kind":"module","full_name":"Crystagiri","name":"Crystagiri","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"crystagiri/html.cr","line_number":4,"url":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr"},{"filename":"crystagiri/tag.cr","line_number":1,"url":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/tag.cr"},{"filename":"crystagiri/version.cr","line_number":1,"url":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/version.cr"},{"filename":"crystagiri.cr","line_number":3,"url":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri.cr"}],"repository_name":"github.com/madeindjs/Crystagiri","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.3.4\"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/madeindjs/Crystagiri/Crystagiri/HTML","path":"Crystagiri/HTML.html","kind":"class","full_name":"Crystagiri::HTML","name":"HTML","abstract":false,"superclass":{"html_id":"github.com/madeindjs/Crystagiri/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/madeindjs/Crystagiri/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/madeindjs/Crystagiri/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"crystagiri/html.cr","line_number":6,"url":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr"}],"repository_name":"github.com/madeindjs/Crystagiri","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/madeindjs/Crystagiri/Crystagiri","kind":"module","full_name":"Crystagiri","name":"Crystagiri"},"doc":"Represent an Html document who can be parsed","summary":"<p>Represent an Html document who can be parsed</p>","class_methods":[{"id":"css_query_to_xpath(query:String):String-class-method","html_id":"css_query_to_xpath(query:String):String-class-method","name":"css_query_to_xpath","doc":"Transform the css query into an xpath query","summary":"<p>Transform the css query into an xpath query</p>","abstract":false,"args":[{"name":"query","doc":null,"default_value":"","external_name":"query","restriction":"String"}],"args_string":"(query : String) : String","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L34","def":{"name":"css_query_to_xpath","args":[{"name":"query","doc":null,"default_value":"","external_name":"query","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"query = \"//#{query}\"\nquery = query.gsub(/\\#([A-z0-9]+-*_*)+/) do |m|\n  \"*[@id=\\\"%s\\\"]\" % (m.delete('#'))\nend\nquery = query.gsub(/\\.([A-z0-9]+-*_*)+/) do |m|\n  \"[@class=\\\"%s\\\"]\" % (m.delete('.'))\nend\nquery = query.gsub(/\\s*>\\s*/) do |m|\n  \"/\"\nend\nquery = query.gsub(\" \", \"//\")\nquery = query.gsub(/\\/\\[/) do |m|\n  \"/*[\"\nend\nreturn query\n"}}],"constructors":[{"id":"from_file(path:String):HTML-class-method","html_id":"from_file(path:String):HTML-class-method","name":"from_file","doc":"Initialize an Html object from content of file\ndesigned by the given filepath","summary":"<p>Initialize an Html object from content of file designed by the given filepath</p>","abstract":false,"args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"}],"args_string":"(path : String) : HTML","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L29","def":{"name":"from_file","args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"HTML","visibility":"Public","body":"return HTML.new(File.read(path))"}},{"id":"from_url(url:String,follow:Bool=false):HTML-class-method","html_id":"from_url(url:String,follow:Bool=false):HTML-class-method","name":"from_url","doc":"Initialize an Html object from Html source fetched\nfrom the url","summary":"<p>Initialize an Html object from Html source fetched from the url</p>","abstract":false,"args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":"String"},{"name":"follow","doc":null,"default_value":"false","external_name":"follow","restriction":"Bool"}],"args_string":"(url : String, follow : Bool = <span class=\"n\">false</span>) : HTML","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L12","def":{"name":"from_url","args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":"String"},{"name":"follow","doc":null,"default_value":"false","external_name":"follow","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"HTML","visibility":"Public","body":"begin\n  response = HTTP::Client.get(url)\n  if response.status_code == 200\n    return HTML.new(response.body)\n  else\n    if follow && (response.status_code == 301)\n      from_url(response.headers[\"Location\"], follow: true)\n    else\n      raise(ArgumentError.new(\"Host returned #{response.status_code}\"))\n    end\n  end\nrescue Socket::Error\n  raise(Socket::Error.new(\"Host #{url} cannot be fetched\"))\nend"}},{"id":"new(content:String)-class-method","html_id":"new(content:String)-class-method","name":"new","doc":"Initialize an Html object from Html source","summary":"<p>Initialize an Html object from Html source</p>","abstract":false,"args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":"String"}],"args_string":"(content : String)","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L50","def":{"name":"new","args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(content)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"at_css(query:String)-instance-method","html_id":"at_css(query:String)-instance-method","name":"at_css","doc":"Find first node corresponding to the css query and return\n`Crystagiri::Tag` if founded or a nil if not founded","summary":"<p>Find first node corresponding to the css query and return <code><a href=\"../Crystagiri/Tag.html\">Crystagiri::Tag</a></code> if founded or a nil if not founded</p>","abstract":false,"args":[{"name":"query","doc":null,"default_value":"","external_name":"query","restriction":"String"}],"args_string":"(query : String)","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L93","def":{"name":"at_css","args":[{"name":"query","doc":null,"default_value":"","external_name":"query","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"css(query) do |tag|\n  return tag\nend\nreturn nil\n"}},{"id":"at_id(id_name:String):Crystagiri::Tag?-instance-method","html_id":"at_id(id_name:String):Crystagiri::Tag?-instance-method","name":"at_id","doc":"Find a node by its id and return a\n`Crystagiri::Tag` founded or a nil if not founded","summary":"<p>Find a node by its id and return a <code><a href=\"../Crystagiri/Tag.html\">Crystagiri::Tag</a></code> founded or a nil if not founded</p>","abstract":false,"args":[{"name":"id_name","doc":null,"default_value":"","external_name":"id_name","restriction":"String"}],"args_string":"(id_name : String) : Crystagiri::Tag?","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L75","def":{"name":"at_id","args":[{"name":"id_name","doc":null,"default_value":"","external_name":"id_name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Crystagiri::Tag | Nil","visibility":"Public","body":"css(\"##{id_name}\") do |tag|\n  return tag\nend\nreturn nil\n"}},{"id":"at_tag(tag_name:String):Crystagiri::Tag?-instance-method","html_id":"at_tag(tag_name:String):Crystagiri::Tag?-instance-method","name":"at_tag","doc":"Find first tag by tag name and return\n`Crystagiri::Tag` founded or a nil if not founded","summary":"<p>Find first tag by tag name and return <code><a href=\"../Crystagiri/Tag.html\">Crystagiri::Tag</a></code> founded or a nil if not founded</p>","abstract":false,"args":[{"name":"tag_name","doc":null,"default_value":"","external_name":"tag_name","restriction":"String"}],"args_string":"(tag_name : String) : Crystagiri::Tag?","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L56","def":{"name":"at_tag","args":[{"name":"tag_name","doc":null,"default_value":"","external_name":"tag_name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Crystagiri::Tag | Nil","visibility":"Public","body":"where_tag(tag_name) do |tag|\n  return tag\nend\nreturn nil\n"}},{"id":"content:String-instance-method","html_id":"content:String-instance-method","name":"content","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L7","def":{"name":"content","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@content"}},{"id":"css(query:String,&block):Array(Tag)-instance-method","html_id":"css(query:String,&amp;block):Array(Tag)-instance-method","name":"css","doc":"Find all node corresponding to the css query and yield\n`Crystagiri::Tag` founded or a nil if not founded","summary":"<p>Find all node corresponding to the css query and yield <code><a href=\"../Crystagiri/Tag.html\">Crystagiri::Tag</a></code> founded or a nil if not founded</p>","abstract":false,"args":[{"name":"query","doc":null,"default_value":"","external_name":"query","restriction":"String"}],"args_string":"(query : String, &block) : Array(Tag)","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L82","def":{"name":"css","args":[{"name":"query","doc":null,"default_value":"","external_name":"query","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"Array(Tag)","visibility":"Public","body":"query = HTML.css_query_to_xpath(query)\nreturn (@nodes.xpath_nodes(\"//#{query}\")).map do |node|\n  tag = (Tag.new(node)).as(Crystagiri::Tag)\n  yield tag\n  tag\nend\n"}},{"id":"nodes:XML::Node-instance-method","html_id":"nodes:XML::Node-instance-method","name":"nodes","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : XML::Node","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L8","def":{"name":"nodes","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@nodes"}},{"id":"where_class(class_name:String,&block):Array(Tag)-instance-method","html_id":"where_class(class_name:String,&amp;block):Array(Tag)-instance-method","name":"where_class","doc":"Find all nodes by classname and yield\n`Crystagiri::Tag` founded","summary":"<p>Find all nodes by classname and yield <code><a href=\"../Crystagiri/Tag.html\">Crystagiri::Tag</a></code> founded</p>","abstract":false,"args":[{"name":"class_name","doc":null,"default_value":"","external_name":"class_name","restriction":"String"}],"args_string":"(class_name : String, &block) : Array(Tag)","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L69","def":{"name":"where_class","args":[{"name":"class_name","doc":null,"default_value":"","external_name":"class_name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"Array(Tag)","visibility":"Public","body":"return css(\".#{class_name}\") do |tag|\n  yield tag\nend"}},{"id":"where_tag(tag_name:String,&block):Array(Tag)-instance-method","html_id":"where_tag(tag_name:String,&amp;block):Array(Tag)-instance-method","name":"where_tag","doc":"Find all nodes by tag name and yield\n`Crystagiri::Tag` founded","summary":"<p>Find all nodes by tag name and yield <code><a href=\"../Crystagiri/Tag.html\">Crystagiri::Tag</a></code> founded</p>","abstract":false,"args":[{"name":"tag_name","doc":null,"default_value":"","external_name":"tag_name","restriction":"String"}],"args_string":"(tag_name : String, &block) : Array(Tag)","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/html.cr#L63","def":{"name":"where_tag","args":[{"name":"tag_name","doc":null,"default_value":"","external_name":"tag_name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"Array(Tag)","visibility":"Public","body":"return css(tag_name) do |tag|\n  yield tag\nend"}}],"macros":[],"types":[]},{"html_id":"github.com/madeindjs/Crystagiri/Crystagiri/Tag","path":"Crystagiri/Tag.html","kind":"class","full_name":"Crystagiri::Tag","name":"Tag","abstract":false,"superclass":{"html_id":"github.com/madeindjs/Crystagiri/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/madeindjs/Crystagiri/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/madeindjs/Crystagiri/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"crystagiri/tag.cr","line_number":2,"url":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/tag.cr"}],"repository_name":"github.com/madeindjs/Crystagiri","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/madeindjs/Crystagiri/Crystagiri","kind":"module","full_name":"Crystagiri","name":"Crystagiri"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(node:XML::Node)-class-method","html_id":"new(node:XML::Node)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"XML::Node"}],"args_string":"(node : XML::Node)","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/tag.cr#L5","def":{"name":"new","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"XML::Node"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(node)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"classname:String?-instance-method","html_id":"classname:String?-instance-method","name":"classname","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/tag.cr#L8","def":{"name":"classname","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | Nil","visibility":"Public","body":"return @node[\"class\"]? ? @node[\"class\"] : nil"}},{"id":"content:String-instance-method","html_id":"content:String-instance-method","name":"content","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/tag.cr#L16","def":{"name":"content","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"return @node.text != nil ? @node.text.as(String) : \"\".as(String)"}},{"id":"node:XML::Node-instance-method","html_id":"node:XML::Node-instance-method","name":"node","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : XML::Node","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/tag.cr#L3","def":{"name":"node","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@node"}},{"id":"tagname:String-instance-method","html_id":"tagname:String-instance-method","name":"tagname","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/madeindjs/Crystagiri/blob/fd04880565fe6be6611bc269e7a5daf184647161/src/crystagiri/tag.cr#L12","def":{"name":"tagname","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"return @node.name"}}],"macros":[],"types":[]}]}]}})